<!-- PROMPT_TAG: 学术 -->

### 结构化学习笔记：箭头函数的缺点与不适用场景

---

#### 一、箭头函数的缺点
1. **没有`arguments`对象**
   - **关键概念**：普通函数中，`arguments`包含所有传入参数；箭头函数中不存在。
   - **示例验证**：
     ```javascript
     // 箭头函数
     const fn1 = () => console.log(arguments);
     fn1(100, 200); // 报错：arguments is not defined

     // 普通函数
     function fn2() { console.log(arguments); }
     fn2(100, 200); // 输出：[100, 200]
     ```

2. **无法通过`apply`/`call`/`bind`修改`this`**
   - **关键概念**：箭头函数的`this`在定义时固定，指向父作用域的`this`。
   - **示例验证**：
     ```javascript
     const fn3 = () => console.log(this);
     fn3.call({name: 'obj'}); // 输出：window（非严格模式）

     function fn4() { console.log(this); }
     fn4.call({name: 'obj'}); // 输出：{name: 'obj'}
     ```

3. **代码可读性差（潜在缺点）**
   - **示例**：多层嵌套的箭头函数可能导致代码难以理解。
     ```javascript
     const confusingFn = (a, b) => (b === undefined ? (b) => a * b : a * b);
     ```
   - **总结**：简洁≠高级，易读性应优先于复杂写法。

---

#### 二、箭头函数的不适用场景
1. **对象方法**
   - **原因**：箭头函数的`this`不指向调用对象，而是父作用域（如`window`）。
   - **示例**：
     ```javascript
     const obj = {
       name: 'Alice',
       getName: () => this.name // 错误！this指向window
     };
     console.log(obj.getName()); // 输出：undefined
     ```

2. **原型方法**
   - **类比对象方法**：原型扩展的方法若用箭头函数，`this`不会指向实例。

3. **构造函数**
   - **原因**：箭头函数不能作为构造函数（无`constructor`）。
   - **示例**：
     ```javascript
     const Person = (name) => { this.name = name; };
     const p = new Person('Bob'); // 报错：Person is not a constructor
     ```

4. **动态上下文中的回调函数**
   - **场景**：需要`this`指向动态绑定对象时（如DOM事件）。
   - **示例**：
     ```javascript
     button.addEventListener('click', () => {
       console.log(this); // 错误！this不指向button
     });
     ```

5. **Vue的生命周期和方法**
   - **根本原因**：Vue组件是JS对象，对象方法不可用箭头函数。
   - **对比React**：React类组件（Class）中箭头函数可行，因为`this`自动绑定实例。

---

#### 三、例外情况：Class中的箭头函数
- **允许场景**：Class的属性方法使用箭头函数时，`this`指向实例。
  ```javascript
  class Person {
    constructor(name) { this.name = name; }
    getName = () => this.name; // 正确
  }
  const p = new Person('Alice');
  console.log(p.getName()); // 输出：Alice
  ```
- **对比总结**：
  - 对象方法：❌ 不可用箭头函数。
  - Class方法：✅ 可用箭头函数（自动绑定实例）。

---

#### 四、总结与工程师敏感度
1. **核心原则**：
   - 箭头函数适合无`this`/`arguments`需求的简洁场景。
   - 涉及动态`this`（如对象方法、DOM回调、Vue）时慎用。

2. **敏感度培养**：
   - 看到`this`需立刻反应其指向，判断是否受箭头函数影响。
   - 类似时间复杂度对性能的影响，`this`绑定是JS中的关键设计考量。

3. **终极目标**：
   - 写出**易读**且**符合场景**的代码，而非追求“看似高级”的写法。